--- # Time-stamp: <2025-08-29 19:02:00>

name: "99 Migration helper" # reusable workflow

'on':
  workflow_call:
    outputs:
      CI_COMMIT_REF_SLUG:
        description: "The branch or tag name for which project is built. in lowercase, shortened to 63 bytes, and with everything except 0-9 and a-z replaced with -. No leading / trailing -."
        value: ${{ jobs.migration-helper01.outputs.CI_COMMIT_REF_SLUG }}

jobs:
  migration-helper01:
    runs-on: ubuntu-latest
    outputs:
      CI_COMMIT_REF_SLUG: ${{ steps.create-CI_COMMIT_REF_SLUG.outputs.CI_COMMIT_REF_SLUG }}
    steps:
      - uses: actions/checkout@v3
      - id: create-CI_COMMIT_REF_SLUG
        env:
          REF_NAME: ${{ github.head_ref || github.ref_name }}
        run: |
          CI_COMMIT_REF_SLUG=$(echo "$REF_NAME" | tr '[:upper:]' '[:lower:]' | sed 's/[^a-z0-9_-]/-/g; s/^-*//; s/-*$//')
          echo "CI_COMMIT_REF_SLUG=$CI_COMMIT_REF_SLUG" >> "$GITHUB_OUTPUT"
